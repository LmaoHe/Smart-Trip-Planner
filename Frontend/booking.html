<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Results - Travel.Co</title>
    <link rel="stylesheet" href="../Frontend/Css/booking.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href='https://unpkg.com/css.gg@2.0.0/icons/all.css' rel='stylesheet'>
    <script type="module" src="./JavaScript/firebase-config.js"></script>
    <script type="module" src="./JavaScript/booking.js"></script>
</head>

<body>
    <div id="messageToast" class="message-toast" style="display: none;"></div>

    <!-- Header / Navigation -->
    <header class="header">
        <div class="nav-container">
            <div class="nav-left">
                <div class="logo"><i class="gg-airplane"></i> Travel.Co</div>
            </div>
            <nav class="nav-center">
                <ul class="nav-menu">
                    <li><a href="home.html">Home</a></li>
                    <li><a href="map.html">Map</a></li>
                    <li><a href="booking.html" class="active">Booking</a></li>
                    <li><a href="planItinerary.html">Trip Planner</a></li>
                </ul>
            </nav>
            <div class="nav-right">
                <div class="user-profile">
                    <div class="profile-dropdown" id="profileDropdown" style="display: none;">
                        <div class="profile-trigger" id="profileTrigger">
                            <div class="profile-avatar" id="profileAvatarInitials"></div>
                            <span class="profile-name" id="profileName"></span>
                        </div>
                        <div class="dropdown-menu">
                            <a href="profile.html" class="dropdown-item">
                                <i class="gg-profile dropdown-icon"></i>
                                Profile
                            </a>
                            <a href="#logout" class="dropdown-item logout" id="logoutButton">
                                <i class="gg-enter dropdown-icon"></i>
                                Logout
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Search Bar Section -->
    <section class="search-bar-section">
        <div class="search-bar-container">
            <!-- Tab Navigation -->
            <div class="search-tabs">
                <button class="search-tab active" data-type="hotel">
                    <i class="gg-home-alt"></i>
                    <span>Hotels & Homes</span>
                </button>
                <button class="search-tab" data-type="flight">
                    <i class="gg-airplane"></i>
                    <span>Flights</span>
                </button>
            </div>

            <!-- Hotel Search Form -->
            <form class="inline-search-form" id="hotelInlineForm" novalidate>
                <div class="inline-search-fields">
                    <div class="inline-input">
                        <i class="gg-pin input-icon"></i>
                        <select class="inline-field" id="hotelDestSearch" required>
                            <option value="" disabled selected>Enter city name</option>
                            <optgroup label="üá≤üáæ Malaysia (Asia)">
                                <option value="Kuala Lumpur">Kuala Lumpur (KUL)</option>
                                <option value="Penang">Penang (PEN)</option>
                                <option value="Johor Bahru">Johor Bahru (JHB)</option>
                                <option value="Kota Kinabalu">Kota Kinabalu (BKI)</option>
                            </optgroup>
                            <optgroup label="üá´üá∑ France (Europe)">
                                <option value="Paris">Paris (CDG)</option>
                                <option value="Lyon">Lyon (LYS)</option>
                                <option value="Nice">Nice (NCE)</option>
                                <option value="Marseille">Marseille (MRS)</option>
                            </optgroup>
                            <optgroup label="üá∫üá∏ United States (North America)">
                                <option value="New York">New York (JFK)</option>
                                <option value="Los Angeles">Los Angeles (LAX)</option>
                                <option value="San Francisco">San Francisco (SFO)</option>
                                <option value="Miami">Miami (MIA)</option>
                                <option value="Las Vegas">Las Vegas (LAS)</option>
                            </optgroup>
                            <optgroup label="üáßüá∑ Brazil (South America)">
                                <option value="Sao Paulo">S√£o Paulo (GRU)</option>
                                <option value="Rio de Janeiro">Rio de Janeiro (GIG)</option>
                                <option value="Brasilia">Bras√≠lia (BSB)</option>
                                <option value="Salvador">Salvador (SSA)</option>
                            </optgroup>
                            <optgroup label="üá≤üáΩ Mexico (Central America)">
                                <option value="Mexico City">Mexico City (MEX)</option>
                                <option value="Cancun">Cancun (CUN)</option>
                                <option value="Guadalajara">Guadalajara (GDL)</option>
                                <option value="Cabo">Cabo (SJD)</option>
                            </optgroup>
                        </select>
                    </div>

                    <div class="inline-input date-group">
                        <i class="gg-calendar input-icon"></i>
                        <input type="date" class="inline-field date-field" id="hotelCheckInSearch" required>
                        <span class="date-separator">-</span>
                        <input type="date" class="inline-field date-field" id="hotelCheckOutSearch" required>
                        <span class="night-label">1 night</span>
                    </div>

                    <div class="inline-input guests-inline">
                        <i class="gg-user input-icon"></i>
                        <button type="button" class="inline-field dropdown-field" id="guestsInlineTrigger">
                            <span id="guestsInlineDisplay">1 room, 2 adults, 0 children</span>
                            <i class="gg-chevron-down"></i>
                        </button>
                        <div class="inline-guests-menu" id="guestsInlineMenu">
                            <div class="guests-control">
                                <span>Rooms</span>
                                <div class="counter">
                                    <button type="button" class="counter-btn" data-action="minus"
                                        data-target="roomsInline">
                                        <i class="gg-math-minus"></i>
                                    </button>
                                    <span class="counter-value" id="roomsInlineCount">1</span>
                                    <button type="button" class="counter-btn" data-action="plus"
                                        data-target="roomsInline">
                                        <i class="gg-math-plus"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="guests-control">
                                <span>Adults</span>
                                <div class="counter">
                                    <button type="button" class="counter-btn" data-action="minus"
                                        data-target="adultsInline">
                                        <i class="gg-math-minus"></i>
                                    </button>
                                    <span class="counter-value" id="adultsInlineCount">2</span>
                                    <button type="button" class="counter-btn" data-action="plus"
                                        data-target="adultsInline">
                                        <i class="gg-math-plus"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="guests-control">
                                <span>Children</span>
                                <div class="counter">
                                    <button type="button" class="counter-btn" data-action="minus"
                                        data-target="childrenInline">
                                        <i class="gg-math-minus"></i>
                                    </button>
                                    <span class="counter-value" id="childrenInlineCount">0</span>
                                    <button type="button" class="counter-btn" data-action="plus"
                                        data-target="childrenInline">
                                        <i class="gg-math-plus"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="inline-search-btn">
                        <i class="gg-search"></i>
                        Search
                    </button>
                </div>
            </form>

            <!-- Flight Search Form -->
            <form class="inline-search-form hidden" id="flightInlineForm" novalidate>
                <div class="inline-search-fields">
                    <!-- Trip Type Select -->
                    <div class="inline-input">
                        <i class="gg-sync input-icon"></i>
                        <select class="inline-field" id="tripTypeSelect" required>
                            <option value="round-trip">Round-trip</option>
                            <option value="one-way">One-way</option>
                        </select>
                    </div>

                    <!-- From (Origin) -->
                    <div class="inline-input">
                        <i class="gg-airplane input-icon"></i>
                        <select class="inline-field" id="flightFromSearch" required>
                            <option value="" disabled selected>From (City)</option>
                            <optgroup label="üá≤üáæ Malaysia (Asia)">
                                <option value="KUL">Kuala Lumpur (KUL)</option>
                                <option value="PEN">Penang (PEN)</option>
                                <option value="JHB">Johor Bahru (JHB)</option>
                                <option value="BKI">Kota Kinabalu (BKI)</option>
                            </optgroup>
                            <optgroup label="üá´üá∑ France (Europe)">
                                <option value="CDG">Paris (CDG)</option>
                                <option value="LYS">Lyon (LYS)</option>
                                <option value="NCE">Nice (NCE)</option>
                                <option value="MRS">Marseille (MRS)</option>
                            </optgroup>
                            <optgroup label="üá∫üá∏ United States (North America)">
                                <option value="JFK">New York (JFK)</option>
                                <option value="LAX">Los Angeles (LAX)</option>
                                <option value="SFO">San Francisco (SFO)</option>
                                <option value="MIA">Miami (MIA)</option>
                                <option value="LAS">Las Vegas (LAS)</option>
                            </optgroup>
                            <optgroup label="üáßüá∑ Brazil (South America)">
                                <option value="GRU">S√£o Paulo (GRU)</option>
                                <option value="GIG">Rio de Janeiro (GIG)</option>
                                <option value="BSB">Bras√≠lia (BSB)</option>
                                <option value="SSA">Salvador (SSA)</option>
                            </optgroup>
                            <optgroup label="üá≤üáΩ Mexico (Central America)">
                                <option value="MEX">Mexico City (MEX)</option>
                                <option value="CUN">Cancun (CUN)</option>
                                <option value="GDL">Guadalajara (GDL)</option>
                                <option value="SJD">Cabo (SJD)</option>
                            </optgroup>
                        </select>
                    </div>

                    <!-- To (Destination) -->
                    <div class="inline-input">
                        <i class="gg-airplane input-icon"></i>
                        <select class="inline-field" id="flightToSearch" required>
                            <option value="" disabled selected>To (City)</option>
                            <optgroup label="üá≤üáæ Malaysia (Asia)">
                                <option value="KUL">Kuala Lumpur (KUL)</option>
                                <option value="PEN">Penang (PEN)</option>
                                <option value="JHB">Johor Bahru (JHB)</option>
                                <option value="BKI">Kota Kinabalu (BKI)</option>
                            </optgroup>
                            <optgroup label="üá´üá∑ France (Europe)">
                                <option value="CDG">Paris (CDG)</option>
                                <option value="LYS">Lyon (LYS)</option>
                                <option value="NCE">Nice (NCE)</option>
                                <option value="MRS">Marseille (MRS)</option>
                            </optgroup>
                            <optgroup label="üá∫üá∏ United States (North America)">
                                <option value="JFK">New York (JFK)</option>
                                <option value="LAX">Los Angeles (LAX)</option>
                                <option value="SFO">San Francisco (SFO)</option>
                                <option value="MIA">Miami (MIA)</option>
                                <option value="LAS">Las Vegas (LAS)</option>
                            </optgroup>
                            <optgroup label="üáßüá∑ Brazil (South America)">
                                <option value="GRU">S√£o Paulo (GRU)</option>
                                <option value="GIG">Rio de Janeiro (GIG)</option>
                                <option value="BSB">Bras√≠lia (BSB)</option>
                                <option value="SSA">Salvador (SSA)</option>
                            </optgroup>
                            <optgroup label="üá≤üáΩ Mexico (Central America)">
                                <option value="MEX">Mexico City (MEX)</option>
                                <option value="CUN">Cancun (CUN)</option>
                                <option value="GDL">Guadalajara (GDL)</option>
                                <option value="SJD">Cabo (SJD)</option>
                            </optgroup>
                        </select>
                    </div>

                    <!-- Dates -->
                    <div class="inline-input date-group">
                        <i class="gg-calendar input-icon"></i>
                        <input type="date" class="inline-field date-field" id="flightDepartSearch" required>
                        <span class="date-separator" id="returnDateSeparator">-</span>
                        <input type="date" class="inline-field date-field" id="flightReturnSearch">
                    </div>

                    <!-- Passengers -->
                    <div class="inline-input">
                        <i class="gg-user input-icon"></i>
                        <input type="number" placeholder="1 passenger" min="1" max="9" class="inline-field"
                            id="flightTravelersSearch" value="1" required>
                    </div>

                    <!-- Class -->
                    <div class="inline-input">
                        <i class="gg-briefcase input-icon"></i>
                        <select class="inline-field" id="flightClassSearch">
                            <option value="ECONOMY">Economy</option>
                            <option value="PREMIUM_ECONOMY">Premium Economy</option>
                            <option value="BUSINESS">Business</option>
                            <option value="FIRST">First Class</option>
                        </select>
                    </div>

                    <!-- Search Button -->
                    <button type="submit" class="inline-search-btn">
                        <i class="gg-search"></i>
                        Search Flights
                    </button>
                </div>
            </form>
        </div>
    </section>

    <!-- Main Content -->
    <main class="booking-content">
        <div class="booking-container">

            <!-- Sidebar Filters (Dynamic: Shows hotel or flight filters) -->
            <aside class="filters-sidebar">
                <div class="filters-header">
                    <h3>Filters</h3>
                    <button class="clear-filters-btn" id="clearFilters">Clear</button>
                </div>

                <!-- HOTEL FILTERS -->
                <div id="hotelFilters">
                    <div class="filter-section">
                        <h4 class="filter-title">Rating</h4>

                        <label class="filter-checkbox">
                            <input type="checkbox" value="1" data-filter="rating">
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-label">
                                <div class="rating-circles-filter">
                                    <div class="circle-filter filled"></div>
                                    <div class="circle-filter"></div>
                                    <div class="circle-filter"></div>
                                    <div class="circle-filter"></div>
                                    <div class="circle-filter"></div>
                                </div>
                                <span class="rating-plus">+</span>
                            </span>
                        </label>

                        <label class="filter-checkbox">
                            <input type="checkbox" value="2" data-filter="rating">
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-label">
                                <div class="rating-circles-filter">
                                    <div class="circle-filter filled"></div>
                                    <div class="circle-filter filled"></div>
                                    <div class="circle-filter"></div>
                                    <div class="circle-filter"></div>
                                    <div class="circle-filter"></div>
                                </div>
                                <span class="rating-plus">+</span>
                            </span>
                        </label>

                        <label class="filter-checkbox">
                            <input type="checkbox" value="3" data-filter="rating">
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-label">
                                <div class="rating-circles-filter">
                                    <div class="circle-filter filled"></div>
                                    <div class="circle-filter filled"></div>
                                    <div class="circle-filter filled"></div>
                                    <div class="circle-filter"></div>
                                    <div class="circle-filter"></div>
                                </div>
                                <span class="rating-plus">+</span>
                            </span>
                        </label>

                        <label class="filter-checkbox">
                            <input type="checkbox" value="4" data-filter="rating">
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-label">
                                <div class="rating-circles-filter">
                                    <div class="circle-filter filled"></div>
                                    <div class="circle-filter filled"></div>
                                    <div class="circle-filter filled"></div>
                                    <div class="circle-filter filled"></div>
                                    <div class="circle-filter"></div>
                                </div>
                                <span class="rating-plus">+</span>
                            </span>
                        </label>
                    </div>
                </div>

                <!-- FLIGHT FILTERS -->
                <div id="flightFilters" style="display: none;">
                    <!-- Stops Filter -->
                    <div class="filter-section">
                        <h4 class="filter-title">Stops</h4>

                        <label class="filter-checkbox">
                            <input type="checkbox" value="0" data-filter="stops">
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-label">Direct</span>
                        </label>

                        <label class="filter-checkbox">
                            <input type="checkbox" value="1" data-filter="stops">
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-label">1 Stop</span>
                        </label>

                        <label class="filter-checkbox">
                            <input type="checkbox" value="2" data-filter="stops">
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-label">2+ Stops</span>
                        </label>
                    </div>

                    <!-- Price Range Filter -->
                    <div class="filter-section">
                        <h4 class="filter-title">Price Range</h4>
                        <input type="range" id="flightPriceSlider" class="price-slider" min="0" max="5000" value="5000"
                            step="100">
                        <div class="price-labels">
                            <span>RM 0</span>
                            <span id="flightPriceMax">RM 5000+</span>
                        </div>
                    </div>

                    <!-- Airlines Filter -->
                    <div class="filter-section">
                        <h4 class="filter-title">Airlines</h4>
                        <div id="airlinesFilterList">
                            <!-- Dynamically populated -->
                        </div>
                    </div>

                    <!-- Departure Time Filter -->
                    <div class="filter-section">
                        <h4 class="filter-title">Departure Time</h4>

                        <label class="filter-checkbox">
                            <input type="checkbox" value="morning" data-filter="departTime">
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-label">Morning (6AM - 12PM)</span>
                        </label>

                        <label class="filter-checkbox">
                            <input type="checkbox" value="afternoon" data-filter="departTime">
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-label">Afternoon (12PM - 6PM)</span>
                        </label>

                        <label class="filter-checkbox">
                            <input type="checkbox" value="evening" data-filter="departTime">
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-label">Evening (6PM - 12AM)</span>
                        </label>

                        <label class="filter-checkbox">
                            <input type="checkbox" value="night" data-filter="departTime">
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-label">Night (12AM - 6AM)</span>
                        </label>
                    </div>
                </div>
            </aside>

            <!-- Results Section (UNIFIED FOR BOTH HOTEL & FLIGHT) -->
            <section class="results-section">
                <!-- Results Header (shared) -->
                <div class="results-header">
                    <h2 class="results-count" id="resultsCount"></h2>
                    <div class="sort-dropdown">
                        <label for="sortSelect">Sort by:</label>
                        <select id="sortSelect" class="sort-select">
                            <!-- Hotel sort options -->
                            <option value="recommended">Recommended</option>
                            <option value="price-low">Price: Low to High</option>
                            <option value="price-high">Price: High to Low</option>
                            <option value="rating-high">Rating: High to Low</option>
                            <option value="rating-low">Rating: Low to High</option>
                        </select>
                    </div>
                </div>

                <!-- Loading State (shared) -->
                <div class="loading-state" id="loadingState" style="display: none;">
                    <div class="spinner"></div>
                    <p id="loadingText">Searching for the best options...</p>
                </div>

                <!-- Results Grid (shared - content changes based on tab) -->
                <div class="results-grid" id="resultsGrid">
                    <!-- Default prompt -->
                    <div class="search-prompt" id="searchPrompt">
                        <i class="gg-search" id="promptIcon"
                            style="font-size: 64px; color: var(--primary-blue); margin-bottom: 20px;"></i>
                        <h3 id="promptTitle" style="font-size: 24px; margin-bottom: 12px; color: var(--text-dark);">
                            Ready to find your perfect stay?</h3>
                        <p id="promptText" style="color: var(--text-gray); font-size: 16px;">Enter your destination,
                            dates, and number of guests above to search for hotels.</p>
                    </div>
                </div>
            </section>

        </div>
    </main>

</body>

</html>