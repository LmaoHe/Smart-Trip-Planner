<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Your Package Booking - Travel.Co</title>
    <link href='https://unpkg.com/css.gg@2.0.0/icons/all.css' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="CSS/packageCheckout.css">
    <script type="module" src="JavaScript/packageCheckout.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="home.html" class="nav-logo">
                <i class="gg-airplane"></i>
                <span>Travel.Co</span>
            </a>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="checkout-container">

        <!-- Progress Bar -->
        <div class="progress-bar-container">
            <div class="progress-steps">
                <div class="progress-step active" data-step="1">
                    <div class="step-circle">1</div>
                    <div class="step-label">Personal Info</div>
                </div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="2">
                    <div class="step-circle">2</div>
                    <div class="step-label">Payment</div>
                </div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="3">
                    <div class="step-circle">3</div>
                    <div class="step-label">Confirmation</div>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="checkout-content">

            <!-- Left Side - Form Steps -->
            <div class="checkout-form">

                <!-- STEP 1: LEAD PASSENGER INFO -->
                <div class="form-step active" id="step-1">
                    <h2 class="form-title">Lead Passenger Information</h2>
                    <div class="form-section">
                        <h3 class="section-title">Who's the lead guest?</h3>
                        <p class="section-subtitle">*Required field</p>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="firstName">First name *</label>
                                <input type="text" id="firstName" class="form-input" required>
                                <span id="firstNameError" class="error-message" style="display: none;"></span>
                            </div>
                            <div class="form-group">
                                <label for="lastName">Last name *</label>
                                <input type="text" id="lastName" class="form-input" required>
                                <span id="lastNameError" class="error-message" style="display: none;"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="email">Email *</label>
                            <input type="email" id="email" class="form-input" required>
                            <small class="form-hint">We'll use this to send your booking confirmation</small>
                            <span id="emailError" class="error-message" style="display: none;"></span>
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone number *</label>
                            <input type="tel" id="phone" class="form-input" required>
                            <span id="phoneError" class="error-message" style="display: none;"></span>
                        </div>
                    </div>
                    <div class="form-section">
                        <h3 class="section-title">Special Requests</h3>
                        <p class="section-subtitle">Select your preferences (optional)</p>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Room Type Preference</label>
                                <div class="radio-group">
                                    <label class="radio-option">
                                        <input type="radio" name="smoking" value="non-smoking" checked>
                                        <span>Non-smoking</span>
                                    </label>
                                    <label class="radio-option">
                                        <input type="radio" name="smoking" value="smoking">
                                        <span>Smoking</span>
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Bed Setup Preference</label>
                                <div class="radio-group">
                                    <label class="radio-option">
                                        <input type="radio" name="bed" value="large" checked>
                                        <span>1 Large Bed</span>
                                    </label>
                                    <label class="radio-option">
                                        <input type="radio" name="bed" value="twin">
                                        <span>2 Twin Beds</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="requests">Additional Requests</label>
                            <textarea id="requests" class="form-input" rows="4"
                                placeholder="Any special requests or requirements?"></textarea>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="backToPackage">
                            <i class="gg-arrow-left"></i>
                            Back to Room Selection
                        </button>
                        <button type="button" class="btn-primary" id="nextToPassengers">
                            Next: Passenger Details
                            <i class="gg-arrow-right"></i>
                        </button>
                    </div>
                </div>

                <!-- STEP PASSENGERS: ALL PASSENGER PASSPORTS -->
                <div class="form-step" id="step-passengers">
                    <h2 class="form-title">Passenger Passport Information</h2>
                    <p class="form-subtitle">Required for all <span id="passengerCountDisplay">1</span> passenger(s)</p>
                    <div id="passengersContainer"></div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="backToLeadPassenger">
                            <i class="gg-arrow-left"></i>
                            Back
                        </button>
                        <button type="button" class="btn-primary" id="nextToBaggage">
                            Next: Baggage Selection
                            <i class="gg-arrow-right"></i>
                        </button>
                    </div>
                </div>

                <!-- STEP BAGGAGE: BAGGAGE OPTIONS (Click-Card, Visible Radio) -->
                <div class="form-step" id="step-baggage">
                    <h2 class="form-title">Baggage & Add-ons</h2>
                    <p class="form-subtitle">Optional - Add extra baggage for your journey</p>
                    <div class="form-section">
                        <h3 class="section-title">Baggage Selection</h3>
                        <div class="baggage-options">
                            <div class="baggage-option">
                                <input type="radio" name="baggage" value="standard" data-price="0" checked>
                                <div class="baggage-info">
                                    <div class="baggage-title">Standard Baggage</div>
                                    <div class="baggage-details">
                                        <span><i class="fa-solid fa-bag-shopping"></i> 1x 20kg</span>
                                        <span class="baggage-price">MYR 0</span>
                                    </div>
                                    <p class="baggage-desc">Included in your ticket</p>
                                </div>
                            </div>
                            <div class="baggage-option">
                                <input type="radio" name="baggage" value="extra20" data-price="80">
                                <div class="baggage-info">
                                    <div class="baggage-title">Extra Baggage (20kg)</div>
                                    <div class="baggage-details">
                                        <span><i class="fa-solid fa-bag-shopping"></i> 1x 20kg</span>
                                        <span class="baggage-price">MYR 80</span>
                                    </div>
                                    <p class="baggage-desc">Per person, per flight</p>
                                </div>
                            </div>
                            <div class="baggage-option">
                                <input type="radio" name="baggage" value="extra30" data-price="120">
                                <div class="baggage-info">
                                    <div class="baggage-title">Extra Baggage (30kg)</div>
                                    <div class="baggage-details">
                                        <span><i class="fa-solid fa-bag-shopping"></i> 1x 30kg</span>
                                        <span class="baggage-price">MYR 120</span>
                                    </div>
                                    <p class="baggage-desc">Per person, per flight</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="backToPassengers">
                            <i class="gg-arrow-left"></i>
                            Back
                        </button>
                        <button type="button" class="btn-primary" id="nextToPayment">
                            Next: Payment Details
                            <i class="gg-arrow-right"></i>
                        </button>
                    </div>
                </div>

                <!-- STEP 2: PAYMENT -->
                <div class="form-step" id="step-2">
                    <h2 class="form-title">Payment Details</h2>
                    <div class="form-section">
                        <div class="security-badge">
                            <i class="gg-lock"></i>
                            <span>Secure Payment - All card information is encrypted</span>
                        </div>
                        <h3 class="section-title">Select Payment Method *</h3>
                        <div class="payment-option">
                            <label class="payment-option-header">
                                <input type="radio" name="paymentMethod" value="card" checked>
                                <div class="payment-option-title">
                                    <span>Credit/Debit Card</span>
                                    <div class="card-logos">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/0/04/Visa.svg"
                                            alt="Visa" height="20">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/2/2a/Mastercard-logo.svg"
                                            alt="Mastercard" height="20">
                                    </div>
                                </div>
                            </label>
                            <div class="payment-option-content" id="cardPaymentContent">
                                <div class="form-group">
                                    <label for="cardName">Card holder name *</label>
                                    <input type="text" id="cardName" class="form-input" placeholder="Name on card"
                                        autocomplete="off">
                                    <span id="cardNameError" class="error-message" style="display: none;"></span>
                                </div>
                                <div class="form-group">
                                    <label for="cardNumber">Card number *</label>
                                    <input type="text" id="cardNumber" class="form-input"
                                        placeholder="1234 5678 9012 3456" maxlength="19" autocomplete="off">
                                    <span id="cardNumberError" class="error-message" style="display: none;"></span>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="cardExpiry">Expiry date *</label>
                                        <input type="text" id="cardExpiry" class="form-input" placeholder="MM/YY"
                                            maxlength="5" autocomplete="off">
                                        <span id="cardExpiryError" class="error-message" style="display: none;"></span>
                                    </div>
                                    <div class="form-group">
                                        <label for="cardCVV">CVV *</label>
                                        <input type="text" id="cardCVV" class="form-input" placeholder="123"
                                            maxlength="3" autocomplete="off">
                                        <span id="cardCVVError" class="error-message" style="display: none;"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="payment-option">
                            <label class="payment-option-header">
                                <input type="radio" name="paymentMethod" value="digital">
                                <div class="payment-option-title">
                                    <span>Digital Payment</span>
                                    <div class="digital-logos">
                                        <span class="digital-logo">PayPal</span>
                                        <span class="digital-logo">Touch 'n Go</span>
                                        <span class="digital-logo">GrabPay</span>
                                    </div>
                                </div>
                            </label>
                            <div class="payment-option-content" id="digitalPaymentContent" style="display: none;">
                                <p class="info-text">You will be redirected to complete your payment securely.</p>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="agreeTerms" required>
                                <span>I agree to the <a href="#" class="link">Terms and Conditions</a> and <a href="#"
                                        class="link">Privacy Policy</a></span>
                            </label>
                            <span id="agreeTermsError" class="error-message" style="display: none;"></span>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="backToBaggage">
                            <i class="gg-arrow-left"></i>
                            Back
                        </button>
                        <button type="button" class="btn-primary" id="confirmBooking">
                            Confirm & Pay
                            <i class="gg-check"></i>
                        </button>
                    </div>
                </div>

                <!-- STEP 3: CONFIRMATION -->
                <div class="form-step" id="step-3">
                    <div class="confirmation-container">
                        <div class="confirmation-icon">
                            <i class="gg-check-o"></i>
                        </div>
                        <h2 class="confirmation-title">Package Booking Confirmed!</h2>
                        <p class="confirmation-subtitle">Your flight and hotel reservation has been successfully completed</p>
                        <div class="booking-id">
                            <span class="booking-id-label">Booking Reference:</span>
                            <span class="booking-id-value" id="bookingId">#PKG123456</span>
                        </div>
                        <div class="confirmation-details">
                            <div class="confirmation-section">
                                <i class="gg-mail"></i>
                                <div>
                                    <p class="confirmation-label">Confirmation Email Sent To:</p>
                                    <p class="confirmation-value" id="confirmEmail">email@example.com</p>
                                </div>
                            </div>
                            <div class="booking-summary-final">
                                <h3>Package Summary</h3>
                                <!-- Flight Info -->
                                <div class="summary-section-header">
                                    <i class="fa fa-plane"></i> Flight Details
                                </div>
                                <div class="summary-item">
                                    <span class="summary-label">Passengers:</span>
                                    <span class="summary-value" id="finalPassengers">2</span>
                                </div>
                                <div class="summary-item">
                                    <span class="summary-label">Route:</span>
                                    <span class="summary-value" id="finalRoute">PEN ↔ LGK</span>
                                </div>
                                <!-- Hotel Info -->
                                <div class="summary-section-header">
                                    <i class="fa fa-hotel"></i> Hotel Details
                                </div>
                                <div class="summary-item">
                                    <span class="summary-label">Hotel:</span>
                                    <span class="summary-value" id="finalHotelName">Hotel Name</span>
                                </div>
                                <div class="summary-item">
                                    <span class="summary-label">Check-in:</span>
                                    <span class="summary-value" id="finalCheckIn">Nov 20, 2025</span>
                                </div>
                                <div class="summary-item">
                                    <span class="summary-label">Check-out:</span>
                                    <span class="summary-value" id="finalCheckOut">Nov 23, 2025</span>
                                </div>
                                <div class="summary-item">
                                    <span class="summary-label">Room:</span>
                                    <span class="summary-value" id="finalRoomName">Deluxe Room</span>
                                </div>
                                <div class="summary-item total">
                                    <span class="summary-label">Total Paid:</span>
                                    <span class="summary-value" id="finalTotal">MYR 2,500</span>
                                </div>
                            </div>
                        </div>
                        <div class="confirmation-actions">
                            <button type="button" class="btn-primary" onclick="window.location.href='profile.html'">
                                <i class="gg-list"></i>
                                View My Bookings
                            </button>
                            <button type="button" class="btn-secondary" onclick="window.location.href='home.html'">
                                <i class="fa fa-home"></i>
                                Back to Home
                            </button>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Right Side - Package Summary (Sticky) -->
            <div class="booking-summary">
                <div class="summary-card">
                    <h3 class="summary-title">
                        <i class="fa fa-box"></i> Package Summary
                    </h3>
                    <!-- FLIGHT SECTION -->
                    <div class="summary-section">
                        <h4 class="summary-section-title">
                            <i class="fa fa-plane"></i> Your Flight
                        </h4>
                        <div class="summary-flight-leg">
                            <div class="flight-leg-label">Outbound</div>
                            <div class="flight-route-compact">
                                <span class="airport-code" id="summaryOutboundFrom">PEN</span>
                                <i class="fa fa-arrow-right"></i>
                                <span class="airport-code" id="summaryOutboundTo">LGK</span>
                            </div>
                            <div class="flight-time-compact" id="summaryOutboundTime">15:10 - 15:50</div>
                            <div class="flight-date-compact" id="summaryOutboundDate">Nov 20, 2025</div>
                        </div>
                        <div class="summary-flight-leg" id="returnFlightSection">
                            <div class="flight-leg-label">Return</div>
                            <div class="flight-route-compact">
                                <span class="airport-code" id="summaryReturnFrom">LGK</span>
                                <i class="fa fa-arrow-right"></i>
                                <span class="airport-code" id="summaryReturnTo">PEN</span>
                            </div>
                            <div class="flight-time-compact" id="summaryReturnTime">18:35 - 19:15</div>
                            <div class="flight-date-compact" id="summaryReturnDate">Nov 23, 2025</div>
                        </div>
                        <div class="flight-meta">
                            <span><i class="fa fa-users"></i> <span id="summaryPassengers">2</span> passenger(s)</span>
                            <span><i class="fa fa-chair"></i> <span id="summaryClass">Economy</span></span>
                        </div>
                    </div>
                    <hr class="summary-divider">
                    <!-- HOTEL SECTION -->
                    <div class="summary-section">
                        <h4 class="summary-section-title">
                            <i class="fa fa-hotel"></i> Your Hotel
                        </h4>
                        <div class="summary-hotel">
                            <img src="" alt="Hotel" class="summary-hotel-image" id="summaryHotelImage">
                            <div class="summary-hotel-info">
                                <h5 class="summary-hotel-name" id="summaryHotelName">Hotel Name</h5>
                                <div class="summary-hotel-rating">
                                    <span id="summaryRating">⭐ 4.5</span>
                                </div>
                                <div class="summary-location">
                                    <i class="fa fa-location-dot"></i>
                                    <span id="summaryLocation">Location</span>
                                </div>
                            </div>
                        </div>
                        <div class="summary-room-compact">
                            <div class="room-name" id="summaryRoomName">Deluxe Room</div>
                            <div class="room-details">
                                <span><i class="fa fa-bed"></i> <span id="summaryBed">1 King Bed</span></span>
                                <span><i class="fa fa-moon"></i> <span id="summaryNights">3 nights</span></span>
                                <span><i class="fa fa-door-open"></i> <span id="summaryRooms">1 room</span></span>
                            </div>
                        </div>
                        <div class="summary-dates-compact">
                            <div class="date-row">
                                <span class="date-label">Check-in:</span>
                                <span class="date-value" id="summaryCheckIn">Nov 20, 2025</span>
                            </div>
                            <div class="date-row">
                                <span class="date-label">Check-out:</span>
                                <span class="date-value" id="summaryCheckOut">Nov 23, 2025</span>
                            </div>
                        </div>
                    </div>
                    <hr class="summary-divider">
                    <!-- PRICE BREAKDOWN -->
                    <div class="summary-price">
                        <div class="price-row">
                            <span class="price-label">Flight</span>
                            <span class="price-value" id="priceFlightTotal">MYR 484.32</span>
                        </div>
                        <div class="price-row">
                            <span class="price-label">Hotel (<span id="priceRoomsNights">1 room × 3
                                    nights</span>)</span>
                            <span class="price-value" id="priceHotelTotal">MYR 1,050</span>
                        </div>
                        <div class="price-row" id="baggagePriceRow" style="display: none;">
                            <span class="price-label">Baggage Add-on</span>
                            <span class="price-value" id="priceBaggageTotal">MYR 0.00</span>
                        </div>
                        <div class="price-row">
                            <span class="price-label">Service Charge (10%)</span>
                            <span class="price-value" id="serviceChargeDisplay">MYR 153.43</span>
                        </div>
                        <div class="price-row total">
                            <span class="price-label">Total</span>
                            <span class="price-value total-amount" id="priceTotal">MYR 1,687.75</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <!-- Loading State -->
    <div id="loadingState" class="loading-overlay" style="display: none;">
        <div class="loading-spinner"></div>
        <p>Processing your package booking...</p>
    </div>

    <!-- JS for clickable baggage card selection -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.baggage-option').forEach(card => {
                card.addEventListener('click', function(e) {
                    const radio = this.querySelector('input[type="radio"]');
                    if (!radio.checked) {
                        radio.checked = true;
                        radio.dispatchEvent(new Event('change', { bubbles: true }));
                    }
                });
            });
        });
    </script>
</body>
</html>
